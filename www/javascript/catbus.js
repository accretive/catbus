define(["jquery"],function(t){return t(document).ready(function(){var n,e,a,s,u,o,r,i,c,l,f,b,d,g,p;n=t("body");e=t("[js-catbus]");a=t("[js-catbus-tail]");s=a.add("[js-catbus-button]");u="catbus-status";r="pinned";o="closed";i=n.hasClass("catbus-open");c=function(){var t,n;n=localStorage.getItem(u);t=false;if(n===r){t=true}return t};d=function(t){var n;n=t?r:o;return localStorage.setItem(u,n)};g=function(t){var a,s;a=false;if(typeof t!=="boolean"){t=null;a=!i}if(t===false||t){a=t}n.toggleClass("catbus-open",a);d(a);i=a;s="closed";if(a){s="open"}return e.trigger(s+".atg.catbus")};b=function(){return g(true)};l=function(){return g(false)};p=function(){return a.toggleClass("hide",!i)};f=function(){var t;t="webkitTransitionEnd otransitionend msTransitionEnd transitionend";s.on("click",g);a.on(t,p);if(c()){b()}else{l()}};f();return{openCatbus:b,closeCatbus:l,catbusStatus:function(){return i}}})});